// Portfolio CMS Database Schema
// PostgreSQL with Prisma ORM

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ============================================
// AUTH & ADMIN
// ============================================

model Admin {
  id            String    @id @default(cuid())
  email         String    @unique
  password      String?   // Null if using OAuth only
  name          String
  avatarUrl     String?
  provider      String    @default("local") // local, google
  providerId    String?   // OAuth provider ID
  refreshToken  String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@map("admins")
}

// ============================================
// SITE SETTINGS
// ============================================

model SiteSettings {
  id          String   @id @default("default")
  siteTitle   String   @default("Portfolio")
  siteTagline String?
  favicon     String?
  ogImage     String?  // Open Graph image for social sharing
  
  // Social Links
  githubUrl   String?
  linkedinUrl String?
  twitterUrl  String?
  portfolioUrl String?
  
  // Footer
  footerText  String   @default("All rights reserved.")
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("site_settings")
}

// ============================================
// HERO SECTION
// ============================================

model Hero {
  id          String   @id @default("default")
  initials    String   @default("JC")
  fullName    String   @default("Jhon Mark Carizon")
  title       String   @default("Web Developer")
  location    String   @default("Mandaue City, Cebu, Philippines")
  profileImage String?

  // Gradient colors for header
  gradientFrom String  @default("#667eea")
  gradientTo   String  @default("#764ba2")

  // Stats displayed below buttons (e.g. "8+ Years", "50+ Projects")
  stats       Json     @default("[]")

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("hero")
}

// ============================================
// ABOUT SECTION
// ============================================

model About {
  id        String   @id @default("default")
  content   Json     // Array of paragraphs: [{id, text, order}]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("about")
}

// ============================================
// SKILLS SECTION
// ============================================

model SkillCategory {
  id        String   @id @default(cuid())
  name      String
  order     Int      @default(0)
  skills    Skill[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("skill_categories")
}

model Skill {
  id         String        @id @default(cuid())
  name       String
  order      Int           @default(0)
  categoryId String
  category   SkillCategory @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  createdAt  DateTime      @default(now())
  updatedAt  DateTime      @updatedAt

  @@map("skills")
}

// ============================================
// PROJECTS SECTION
// ============================================

model Project {
  id          String   @id @default(cuid())
  title       String
  description String
  details     String?  // Additional details/status
  imageUrl    String?
  liveUrl     String?
  githubUrl   String?
  techStack   String[] // Array of technology names
  featured    Boolean  @default(false)
  order       Int      @default(0)
  isVisible   Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("projects")
}

// ============================================
// EXPERIENCE SECTION
// ============================================

model Experience {
  id          String    @id @default(cuid())
  jobTitle    String
  company     String
  location    String
  startDate   DateTime
  endDate     DateTime? // Null means "Present"
  description String
  order       Int       @default(0)
  isVisible   Boolean   @default(true)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@map("experiences")
}

// ============================================
// CONTACT SECTION
// ============================================

model ContactSettings {
  id               String   @id @default("default")
  heading          String   @default("Get In Touch")
  description      String   @default("I'm always open to discussing new opportunities, interesting projects, or potential collaborations.")
  email            String   @default("jhonmarkcarizon@gmail.com")
  buttonText       String   @default("Send Message")
  showSubjectField Boolean  @default(true)
  requireSubject   Boolean  @default(false)
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@map("contact_settings")
}

// Contact form submissions
model ContactMessage {
  id        String   @id @default(cuid())
  name      String
  email     String
  subject   String?
  message   String
  isRead    Boolean  @default(false)
  createdAt DateTime @default(now())

  @@map("contact_messages")
}
